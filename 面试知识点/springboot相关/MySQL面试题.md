1、MySQL中有哪几种锁？

    1、表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最 高，并发度最低。
    2、行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最 低，并发度也最高。
    3、页面锁：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表 锁和行锁之间，并发度一般。

2、MySQL中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？
    
    SQL 标准定义的四个隔离级别为：
    1、read uncommited ：读到未提交数据
    2、read committed：脏读，不可重复读
    3、repeatable read：可重读
    4、serializable ：串行事物

3、CHAR和VARCHAR的区别？

    1、CHAR 和 VARCHAR 类型在存储和检索方面有所不同
    2、char是属于固定长度的字符类型，而varchar是属于可变长度的字符类型。
    3、由于char是固定长度的所以它的处理速度比varchar快很多。但是缺点是浪费存储空间，读取char类型数据时候时如果尾部有空格会丢失空格，
    所以对于那种长度变化不大的并且对查询速度有较高要求的数据可以考虑使用char类型来存储。
    4、CHAR 列长度固定为创建表时声明的长度，长度值范围是 1 到 255 当 CHAR 值被存储时，它们被用空格填充到特定长度，检索 CHAR 值时需删除尾随空格。

4、主键和候选键有什么区别？
 
    表格的每一行都由主键唯一标识,一个表只有一个主键。
    主键也是候选键。按照惯例，候选键可以被指定为主键，并且可以用于任何外键 引用。
    
5、如果一个表有一列定义为TIMESTAMP，将发生什么？

    每当行被更改时，时间戳字段将获取当前时间戳。
    列设置为 AUTO INCREMENT 时，如果在表中达到最大值，会发生什么情况？
    它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。
    怎样才能找出最后一次插入时分配了哪个自动增量？
    LAST_INSERT_ID 将返回由 Auto_increment 分配的最后一个值，并且不需要指 定表名称。

6、LIKE声明中的％和_是什么意思？

    ％对应于 0 个或更多字符，_只是 LIKE 语句中的一个字符。

7、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？

    1、设计良好的数据库结构，允许部分数据冗余，尽量避免 join 查询，提高效率。
    2、选择合适的表字段数据类型和存储引擎，适当的添加索引。
    3、MySQL 库主从读写分离。
    4、找规律分表，减少单表中的数据量提高查询速度。
    5、添加缓存机制，比如 memcached，apc 等。
    6、不经常改动的页面，生成静态页面。
    7、书写高效率的 SQL。比如 SELECT * FROM TABEL 改为 SELECT field_1, field_2, field_3 FROM TABLE.

8、锁的优化策略

    1、读写分离
    2、分段加锁
    3、减少锁持有的时间
    4.多个线程尽量以相同的顺序去获取资源
    不能将锁的粒度过于细化，不然可能会出现线程的加锁和释放次数过多，反而效 率不如一次加一把大锁。
    
9、索引的底层实现原理和优化

    B+树，经过优化的 B+树
    主要是在所有的叶子结点中增加了指向下一个叶子节点的指针，因此 InnoDB 建 议为大部分表使用默认自增的主键作为主索引。

10、实践中如何优化MySQL
最好是按照以下顺序优化：https://youzhixueyuan.com/MySQL-slow-query-optimization-index-optimization.html

    1、SQL 语句及索引的优化
    2、数据库表结构的优化
    3、系统配置的优化
    4、硬件的优化

11、简单描述MySQL中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）

    索引是一种特殊的文件(InnoDB 数据表上的索引是表空间的一个组成部分)，它们 包含着对数据表里所有记录的引用指针。
    普通索引(由关键字 KEY 或 INDEX 定义的索引)的唯一任务是加快对数据的访问速 度。
    普通索引允许被索引的数据列包含重复的值。如果能确定某个数据列将只包含彼 此各不相同的值，在为这个数据列创建索引的时候就应该用关键字 UNIQUE 把它 定义为一个唯一索引。也就是说，唯一索引可以保证数据记录的唯一性。
    主键，是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯 一标识一条记录，使用关键字 PRIMARY KEY 来创建。
    索引可以覆盖多个数据列，如像 INDEX(columnA, columnB)索引，这就是联合索 引。
    索引可以极大的提高数据的查询速度，但是会降低插入、删除、更新表的速度， 因为在执行这些写操作时，还要操作索引文件。

12、事务特性-ACID

    1、原子性：即不可分割性，事务要么全部被执行，要么就全部不被执行。
    2、一致性或可串性。事务的执行使得数据库从一种正确状态转换成另一种正确状 态
    3、隔离性。在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何 其他事务，
    4、持久性。事务正确提交后，其结果将永久保存在数据库中，即使在事务提交后 有了其他故障，事务的处理结果也会得到保存。

13、SQL注入漏洞产生的原因？如何防止？

    SQL 注入产生的原因：程序开发过程中不注意规范书写 sql 语句和对特殊字符进 行过滤，导致客户端可以通过全局变量 POST 和 GET 提交一些 sql 语句正常执行。
    防止 SQL 注入的方式： 
    开启配置文件中的 magic_quotes_gpc 和 magic_quotes_runtime 设置执行 sql 语句时使用 addslashes 进行 sql 语句转换
    Sql 语句书写尽量不要省略双引号和单引号。
    过滤掉 sql 语句中的一些关键词：update、insert、delete、select、 * 。
    提高数据库表和字段的命名技巧，对一些重要的字段根据程序的特点命名，取不 易被猜到的。

14、MYsql优化

MySQL数据库常见的两个瓶颈是：CPU和I/O的瓶颈。 
CPU在饱和的时候一般发生在数据装入内存或从磁盘上读取数据时候。 
磁盘I/O瓶颈发生在装入数据远大于内存容量的时候，如果应用分布在网络上，那么查询量相当大的时候那么瓶颈就会出现在网络上。 

优化方案

1、Mysql的优化，大体可以分为三部分：
索引的优化，sql语句的优化，表的优化 

索引优化

     只要列中含有NULL值，就最好不要在此例设置索引，复合索引如果有NULL值，此列在使用时也不会使用索引 
     尽量使用短索引，如果可以，应该制定一个前缀长度 
     对于经常在where子句使用的列，最好设置索引，这样会加快查找速度 
     对于有多个列where或者order by子句的，应该建立复合索引 
     对于like语句，以%或者‘-’开头的不会使用索引，以%结尾会使用索引 
     尽量不要在列上进行运算（函数操作和表达式操作） 
     尽量不要使用not in和<>操作 

sql慢查询优化

    1.如何捕获低效sql 
    1）slow_query_log 
    这个参数设置为ON，可以捕获执行时间超过一定数值的SQL语句。 
    2）ong_query_time 
    当SQL语句执行时间超过此数值时，就会被记录到日志中，建议设置为1或者更短。 
    3）slow_query_log_file 
    记录日志的文件名。 
    4）log_queries_not_using_indexes 
    这个参数设置为ON，可以捕获到所有未使用索引的SQL语句，尽管这个SQL语句有可能执行得挺快。
    
    
    2.慢查询优化的基本步骤 
    1)先运行看看是否真的很慢，注意设置SQL_NO_CACHE 
    2）where条件单表查，锁定最小返回记录表。这句话的意思是把查询语句的where都应用到表中返回的记录数最小的表开始查起，单表每个字段分别查询，看哪个字段的区分度最高 
    3)explain查看执行计划，是否与1预期一致（从锁定记录较少的表开始查询） 
    4)order by limit 形式的sql语句让排序的表优先查 
    5)了解业务方使用场景 
    6)加索引时参照建索引的几大原则 
    7)观察结果，不符合预期继续从1开始分析
    
     2.优化原则 
     查询时，能不要*就不用*，尽量写全字段名 
     大部分情况连接效率远大于子查询 
     多使用explain和profile分析查询语句 
     查看慢查询日志，找出执行时间长的sql语句优化 
     多表连接时，尽量小表驱动大表，即小表 join 大表 
     在千万级分页时使用limit 
     对于经常使用的查询，可以开启缓存 
     
     
     数据库表优化
     表的字段尽可能用NOT NULL 
     字段长度固定的表查询会更快 
     把数据库的大表按时间或一些标志分成小表 
     将表拆分 
     
     数据表拆分：主要就是垂直拆分和水平拆分。 
    水平切分:将记录散列到不同的表中，各表的结构完全相同，每次从分表中查询, 提高效率。 
    垂直切分:将表中大字段单独拆分到另外一张表, 形成一对一的关系。 
    
    
    总之：
    Mysql的优化主要就在于：索引的优化，sql语句的优化，表的优化，在高并发网络环境下，除了优化数据库外，还会涉及到分布式缓存，CDN，数据库读写分离等高并发优化技术。