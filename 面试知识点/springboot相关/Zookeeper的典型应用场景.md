Zookeeper 是一个典型的发布/订阅模式的分布式数据管理与协调框架，开发人员 可以使用它来进行分布式数据的发布和订阅。
通过对 Zookeeper 中丰富的数据节点进行交叉使用，配合 Watcher 事件通知机 制，可以非常方便的构建一系列分布式应用中年都会涉及的核心功能，如：
1、数据发布/订阅 
2、负载均衡 
3、命名服务 
4、分布式协调/通知 
5、集群管理 
6、Master 选举 
7、分布式锁 
8、分布式队列

# 1数据发布、订阅

数据（配置信息）特性
1、数据量通常比较小 
2、数据内容在运行时会发生动态更新 
3、集群中各机器共享，配置一致
如：机器列表信息、运行时开关配置、数据库配置信息等

基于ZK实现方式
* 数据存储：将数据（配置信息）存储到Zookeeper上的一个数据节点 
*  数据获取：应用在启动初始化节点从Zookeeper数据节点读取数据，并 在该节点上注册一个数据变更Watcher 
* 数据变更：当变更数据时，更新Zookeeper对应节点数据，Zookeeper 会将数据变更通知发到各客户端，客户端接到通知后重新读取变更后的数据即 可。

Zookeeper 分布式锁（文件系统、通知机制）
有了 zookeeper 的一致性文件系统，锁的问题变得容易。锁服务可以分为两类， 一个是保持独占，另一个是控制时序。
对于第一类，我们将 zookeeper上的一个 znode看作是一把锁，通过 createznode 的方式来实现。所有客户端都去创建 /distribute_lock 节点，最终成功创建的那 个客户端也即拥有了这把锁。用完删除掉自己创建的 distribute_lock 节点就释放 出锁。 
对于第二类， /distribute_lock 已经预先存在，所有客户端在它下面创建临时顺 序编号目录节点，和选 master 一样，编号最小的获得锁，用完删除，依次方便。
